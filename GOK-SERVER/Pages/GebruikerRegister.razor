@page "/gebruiker/register"
@inject NavigationManager NavigationManager

<h1>Register</h1>

@if (!done)
{
    <MatTextField @bind-Value="@GebruikersNaam" Label="Gebruikersnaam" FullWidth="true" Required="true"></MatTextField>
    <MatTextField @bind-Value="@Email" Label="Email" FullWidth="true" Required="true" Type="email"></MatTextField>
    <MatTextField @bind-Value="@Naam" Label="Naam" FullWidth="true" Required="true"></MatTextField>
    <MatTextField @bind-Value="@Wachtwoord" Label="Wachtwoord" FullWidth="true" Type="password" Required="true"></MatTextField>
    <MatCheckbox @bind-Checked="@Nieuwsbrief" Label="Nieuwsbrief?"></MatCheckbox>
    <br />
    <MatCheckbox @bind-Checked="@Notificaties" Label="Notificaties?"></MatCheckbox>

    <br />
    <br />

    <MatButton OnClick="@Register" Raised="true">Register</MatButton>
}
else
{
    <MatButton OnClick="@GaNaarLogin" Raised="true">Klik hier om in te loggen</MatButton>
}


@code {

    public DefaultClasses.DBConnection DBConnection { get; set; }
    public DefaultClasses.Gebruiker Gebruiker;

    public string Naam;
    public string Email;
    public string Wachtwoord;
    public string GebruikersNaam;
    public bool Nieuwsbrief;
    public bool Notificaties;

    public bool done = false;

    protected override void OnInitialized()
    {
        DBConnection = new DefaultClasses.DBConnection();
    }

    private void Register()
    {
        DBConnection.RegistreerGebruiker(Naam, Email, Wachtwoord, GebruikersNaam, Nieuwsbrief? 1 : 0, Notificaties? 1 : 0);
        done = true;
    }

    public void GaNaarLogin()
    {
        NavigationManager.NavigateTo("/gebruiker/login");
    }

}